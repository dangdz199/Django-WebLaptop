{% include 'products/header.html' %}
<!-- Main content -->
<main class="container my-5">
  <!-- Breadcrumb navigation -->
  <nav aria-label="breadcrumb">
    <ol class="breadcrumb">
      <li class="breadcrumb-item"><a href="/">Home</a></li>
      <li class="breadcrumb-item"><a href="/products/">Laptops</a></li>
      <li class="breadcrumb-item active" aria-current="page">{{ laptop.name }}</li>
    </ol>
  </nav>

  <div class="row">
    <!-- Cột bên trái: Ảnh chính -->
    <div class="col-md-12 mb-4">
      <!-- Carousel for main images -->
      <div id="laptopCarousel" class="carousel slide" data-ride="carousel">
        <div class="carousel-inner">
          <!-- Main image as the first carousel item -->
          <div class="carousel-item active">
            <img src="{{ laptop.image.url }}" class="d-block w-100" alt="{{ laptop.name }}">
          </div>
          <!-- Loop through additional images and add them as carousel items -->
          {% for image in laptop.images.all %}
          <div class="carousel-item">
            <img src="{{ image.image.url }}" class="d-block w-100" alt="{{ laptop.name }} - additional image">
          </div>
          {% endfor %}
        </div>
        <!-- Carousel controls -->
        <a class="carousel-control-prev" href="#laptopCarousel" role="button" data-slide="prev">
          <span class="carousel-control-prev-icon" aria-hidden="true"></span>
          <span class="sr-only">Previous</span>
        </a>
        <a class="carousel-control-next" href="#laptopCarousel" role="button" data-slide="next">
          <span class="carousel-control-next-icon" aria-hidden="true"></span>
          <span class="sr-only">Next</span>
        </a>
      </div>
    </div>

    <!-- Cột bên phải: Thông tin sản phẩm -->
    <div class="col-md-12">
      <div class="card mb-4">
        <div class="card-body">
          <h2 class="card-title">{{ laptop.name }}</h2>
          <p class="card-text">{{ laptop.description }}</p>
          <p class="card-text"><strong>Price: {{ laptop.price }} VND</strong></p>

          <!-- Additional product details -->
          <p class="card-text"><strong>Specifications:</strong> {{ laptop.specifications }}</p>
          <p class="card-text"><strong>Availability:</strong> {{ laptop.stock }} in stock</p>

          <!-- Add to cart button -->
          <form action="{% url 'add_to_cart' laptop.id %}" method="POST">
            {% csrf_token %}
            <button type="submit" class="btn btn-success">Add to Cart</button>
          </form>

          <!-- Back to products button -->
          <a href="{% url 'laptop_list' %}" class="btn btn-primary mt-3">Back to Product List</a>
        </div>
      </div>
    </div>

    <!-- Additional Images Section -->
    <div class="col-md-12">
      <h4>Additional Images</h4>
      <div class="row">
        {% for image in laptop.images.all %}
        <div class="col-md-3 mb-3">
          <a href="#" onclick="document.getElementById('mainImage').src='{{ image.image.url }}'; return false;">
            <img src="{{ image.image.url }}" class="img-fluid" alt="{{ laptop.name }} - additional image" style="cursor: pointer;">
          </a>
        </div>
        {% empty %}
        <p>No additional images available for this product.</p>
        {% endfor %}
      </div>
    </div>
  </div>

  <!-- Customer Reviews Section -->
  <div class="reviews-section mt-5">
    <h4>Customer Reviews</h4>
    {% for review in laptop.reviews.all %}
    <div class="review">
      <p><strong>{{ review.user.username }}</strong> rated this {{ review.rating }}/5</p>
      <p>{{ review.comment }}</p>
      <hr>
    </div>
    {% empty %}
    <p>No reviews yet. Be the first to review this product!</p>
    {% endfor %}
  </div>
</main>
{% include 'products/footer.html' %}
